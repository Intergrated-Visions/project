<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    <link rel="stylesheet" type="text/css" href="css/profile.css">

    <style>
       
    </style>
</head>
<body>
<div id="navbar">
    <ul>
        <li><a href="home.html" class="active">Home</a></li>
        <li><a href="calories.html">Calories</a></li>
        <li><a href="journal.html">Journal</a></li>
        <li><a href="profile.html">Profile</a></li>
        <li><a href="recommendations.html">Recommendations</a></li>
        <li><a href="logout.php">Logout</a></li>
    </ul>
</div>
    <div class="container">
        <div class="form-section">
            <h1>Profile</h1>
            <form>
                <label for="fullname">Full Name:</label>
                <input type="text" id="fullname" name="fullname">

                <label for="age">Age:</label>
                <input type="number" id="age" name="age">

                <label for="heightFeet">Height:</label>
                <input type="number" id="heightFeet" name="heightFeet" placeholder="Feet" style="width: 49%;">
                <input type="number" id="heightInches" name="heightInches" placeholder="Inches" style="width: 49%;">
                <button type="button" onclick="convertHeight()">Convert to cm</button>
                <div id="heightCm" class="conversion-output"></div>

                <label for="weight">Weight (in pounds):</label>
                <input type="number" id="weight" name="weight">
                <button type="button" onclick="convertWeight()">Convert to kg</button>
                <div id="weightKg" class="conversion-output"></div>

                <label for="goal">Goals:</label>
                <textarea id="goal" name="goal"></textarea>

                <label for="dietaryRestrictions">Dietary Restrictions:</label>
                <select id="dietaryRestrictions" name="dietaryRestrictions">
                    <option value="none">None</option>
                    <option value="vegetarian">Vegetarian</option>
                    <option value="vegan">Vegan</option>
                    <option value="glutenFree">Gluten-Free</option>
                    <option value="kosher">Kosher</option>
                    <option value="halal">Halal</option>
                    <option value="lowCarb">Low Carb</option>
                    <option value="dairyFree">Dairy Free</option>
                </select>

                <label for="about">About Me:</label>
                <textarea id="about" name="about"></textarea>

                <input type="submit" value="Save Profile">
            </form>
        </div>
        <div class="image-section">
            <img id="profilePicPreview" src="path/to/default/image.jpg" alt="Profile Picture Preview">
        </div>
    </div>

    <script>
        function previewFile() {
            const file = document.getElementById('profilePicture').files[0];
            const reader = new FileReader();
            reader.onloadend = function () {
                document.getElementById('profilePicPreview').src = reader.result;
            };
            if (file) {
                reader.readAsDataURL(file);
            }
        }

        function collectFormData() {
            const weightPounds = parseInt(document.getElementById('weight').value);
            const weightKg = (weightPounds * 0.45359237).toFixed(2); // Convert pounds to kilograms

            const feet = parseInt(document.getElementById('heightFeet').value);
            const inches = parseInt(document.getElementById('heightInches').value);
            const totalInches = (feet * 12) + inches;
            const heightCm = (totalInches * 2.54).toFixed(2); // Convert inches to centimeters

            var formData = {
                profilePicture: document.getElementById('profilePicture').files[0], // This will get the file object for the profile picture
                fullName: document.getElementById('fullname').value,
                age: parseInt(document.getElementById('age').value),
                height: {
                    feet: feet,
                    inches: inches,
                    centimeters: heightCm
                },
                weight: {
                    pounds: weightPounds,
                    kilograms: weightKg
                },
                goals: document.getElementById('goal').value,
                dietaryRestrictions: document.getElementById('dietaryRestrictions').value,
                about: document.getElementById('about').value
            };

            console.log(formData); // Log the data to the console for debugging
            sendDataToServer(formData); // Function to send data to the server
        }

        function sendDataToServer(formData) {
            // Assuming JSON data is sent (excluding file uploads):
            formData ['type'] = 'profile'
            fetch('/utils/profile/client.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
              .catch((error) => {
                    console.error('Error:', error);
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                })
              
        }

        // Attach the collectFormData function to the form submit event
        document.querySelector('form').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent the form from submitting normally
            collectFormData();
        });
    </script>

</body>
</html>



