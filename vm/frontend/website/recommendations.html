<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Services</title>
    <link rel="stylesheet" type="text/css" href="css/recommendations.css">
</head>

<body>
    <nav class="navbar">
        <a href="home.html">Home</a>
        <a href="calories.html">Calories</a>
        <a href="journal.html">Journal</a>
        <a href="profile.html">Profile</a>
        <a href="recommendations.html">Recommendations</a>
    </nav>
    <div class="container">
        <h1>Workout Recommendations</h1>
        <p>Enter your health goal to get customized workout recommendations:</p>
        <form id="recommendationsForm">
            <label for="healthGoal">Your Health Goal:</label>
            <textarea id="healthGoal" name="healthGoal" rows="2"
                placeholder="e.g., Lose weight, gain muscle, improve stamina..."></textarea>
            <input type="submit" value="Get Recommendations">
        </form>
        <div id="recommendations"></div>

        <h1>Workout Generator</h1>
        <form id="workoutForm">
            <label for="goal">Fitness Goal:</label>
            <select id="goal">
                <option value="lose_weight">Lose Weight</option>
                <option value="gain_muscle">Gain Muscle</option>
                <option value="increase_stamina">Increase Stamina</option>
            </select>
            <label for="days">Days per week:</label>
            <input type="number" id="days" min="1" max="7" value="3">
            <label for="duration">Duration (minutes):</label>
            <input type="number" id="duration" min="10" max="120" value="60">
            <input type="submit" value="Generate Workout">
        </form>
        <div id="workoutPlan"></div>
    </div>

    <script>
        // Event listener for the recommendations form
        document.getElementById('recommendationsForm').addEventListener('submit', function (event) {
            event.preventDefault();
            getRecommendations();
        });

        // Event listener for the workout form
        document.getElementById('workoutForm').addEventListener('submit', function (event) {
            event.preventDefault();
            generateWorkout();
        });

        // Function to get recommendations from the PHP API
        function getRecommendations() {
            const healthGoalElement = document.getElementById('healthGoal');
            const healthGoal = healthGoalElement.value;
            const recommendationsDiv = document.getElementById('recommendations');

            fetch('http://localhost/backend/api/recommendations.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ goal: healthGoal })
            })
                .then(response => response.json())
                .then(data => {
                    recommendationsDiv.innerHTML = `<p><strong>Recommendation:</strong> ${data.recommendation}</p>`;
                })
                .catch(error => {
                    console.error('Error fetching recommendations:', error);
                    recommendationsDiv.innerHTML = `<p><strong>Error:</strong> There was an issue getting recommendations.</p>`;
                });
        }

        // Function to generate a workout plan from the PHP API
        function generateWorkout() {
            const goalElement = document.getElementById('goal');
            const daysElement = document.getElementById('days');
            const durationElement = document.getElementById('duration');
            const workoutPlanDiv = document.getElementById('workoutPlan');

            const workoutData = {
                goal: goalElement.value,
                days: daysElement.value,
                duration: durationElement.value
            };

            fetch('http://100.116.50.109/backend/api/recommendations.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(workoutData)
            })
                .then(response => response.json())
                .then(data => {
                    workoutPlanDiv.innerHTML = data.planDescription;
                })
                .catch(error => {
                    console.error('Error fetching workout plan:', error);
                    workoutPlanDiv.innerHTML = `<p><strong>Error:</strong> There was an issue generating the workout plan.</p>`;
                });
        }
    </script>
</body>

</html>