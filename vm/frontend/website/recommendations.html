<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Services</title>
    <link rel="stylesheet" type="text/css" href="css/recommendations.css">
</head>

<body>
<div id="navbar">
    <ul>
        <li><a href="home.html" class="active">Home</a></li>
        <li><a href="calories.html">Calories</a></li>
        <li><a href="journal.html">Journal</a></li>
        <li><a href="profile.html">Profile</a></li>
        <li><a href="recommendations.html">Recommendations</a></li>
        <li><a href="register.html">Sign Up</a></li> <!-- Sign Up before Logout -->
        <li><a href="logout.php">Logout</a></li>
    </ul>
</div>


    <div class="container">
        <h1>Workout Recommendations</h1>
        <p>Enter your health goal to get customized workout recommendations:</p>
        <form id="recommendationsForm">
            <label for="healthGoal">Your Health Goal:</label>
            <textarea id="healthGoal" name="healthGoal" rows="2"
                placeholder="e.g., Lose weight, gain muscle, improve stamina..."></textarea>
            <input type="submit" value="Get Recommendations">
        </form>
        <div id="recommendations"></div>

        <h1>Workout Generator</h1>
        <form id="workoutForm">
            <label for="goal">Fitness Goal:</label>
            <select id="goal">
                <option value="lose_weight">Lose Weight</option>
                <option value="gain_muscle">Gain Muscle</option>
                <option value="increase_stamina">Increase Stamina</option>
            </select>
            <label for="days">Days per week:</label>
            <input type="number" id="days" min="1" max="7" value="3">
            <label for="duration">Duration (minutes):</label>
            <input type="number" id="duration" min="10" max="120" value="60">
            <input type="submit" value="Generate Workout">
        </form>
        <div id="workoutPlan"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('recommendationsForm').addEventListener('submit', handleRecommendationsSubmit);
            document.getElementById('workoutForm').addEventListener('submit', handleWorkoutSubmit);
        });

        function handleRecommendationsSubmit(event) {
            event.preventDefault();
            getRecommendations();
        }

        function handleWorkoutSubmit(event) {
            event.preventDefault();
            generateWorkout();
        }

        function getRecommendations() {
            const healthGoal = document.getElementById('healthGoal').value;
            fetch('http://localhost/backend/api/recommendations.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ goal: healthGoal })
            })
                .then(response => response.json())
                .then(data => updateUI(data.recommendation, 'recommendations'))
                .catch(error => handleError(error, 'recommendations'));
        }

        function generateWorkout() {
            const workoutData = {
                goal: document.getElementById('goal').value,
                days: document.getElementById('days').value,
                duration: document.getElementById('duration').value
            };

            fetch('http://100.116.50.109/backend/api/recommendations.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(workoutData)
            })
                .then(response => response.json())
                .then(data => updateUI(data.planDescription, 'workoutPlan'))
                .catch(error => handleError(error, 'workoutPlan'));
        }

        function updateUI(content, elementId) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<p><strong>${elementId === 'recommendations' ? 'Recommendation' : 'Workout Plan'}:</strong> ${content}</p>`;
        }

        function handleError(error, elementId) {
            console.error(`Error fetching ${elementId}:`, error);
            document.getElementById(elementId).innerHTML = `<p><strong>Error:</strong> There was an issue getting ${elementId}.</p>`;
        }
    </script>
</body>

</html>